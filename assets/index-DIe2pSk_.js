import{r as a,a as w,j as s,c as E}from"./vendor-HjcBreze.js";import{S as L,a as N,L as P,B as R}from"./components-CPGmbxho.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function c(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=c(t);fetch(t.href,o)}})();const T=(r,e)=>{const[c,i]=a.useState(r);return a.useEffect(()=>{const t=setTimeout(()=>{i(r)},e);return()=>{clearTimeout(t)}},[r,e]),c},A="http://localhost:5000/search?cracked=true&name=",D="https://api.mcstatus.io/v2/status/java/",g={name:"",motd:null,playerCount:null,maxPlayers:null,icon:null},v={},I=async r=>{try{const{data:e}=await w.get(`${D}${r.address}`);return e.online?{name:r.name,motd:e.motd.html,playerCount:e.players.online,maxPlayers:e.players.max,icon:e.icon}:{...g,name:r.name}}catch(e){return console.error(`error fetching details for server ${r.address}:`,e),{...g,name:r.name}}};async function*O(r){if(r){if(v[r]){for(const e of v[r])yield e;return}try{const{data:e}=await w.get(`${A}${r}`),c=[],i=e.map(l=>I(l));let t=!1;const o=setTimeout(()=>{t=!0},3e3);for(const l of i){const u=await Promise.race([l,new Promise(f=>setTimeout(()=>f(null),5e3))]);if(u!==null&&(c.push(u),yield u),t)break}clearTimeout(o);for(const l of i){const u=await l;c.push(u),yield u}v[r]=c}catch(e){throw console.error(`error fetching servers for query ${r}:`,e),e}}}const C=()=>{const[r,e]=a.useState(""),[c,i]=a.useState([]),[t,o]=a.useState(!1),[l,u]=a.useState(!1),f=T(r,500),m=a.useRef(null),h=a.useRef(null),[y,b]=a.useState(!1),S=n=>{e(n.target.value)};a.useEffect(()=>{const n=()=>{if(m.current){const d=window.innerHeight;m.current.classList.remove("max-h-[75vh]","max-h-[70vh]","max-h-[65vh]"),d>795?m.current.classList.add("max-h-[75vh]"):d>695?m.current.classList.add("max-h-[70vh]"):m.current.classList.add("max-h-[65vh]")}};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]),a.useEffect(()=>{(async()=>{if(!f){i([]);return}o(!0),u(!1),i([]);const d=new Set;try{for await(const p of O(f))d.has(p.name)||(i(j=>[...j,p]),d.add(p.name))}catch{u(!0)}finally{o(!1)}})()},[f]),a.useEffect(()=>{console.log("server fetchati:",c)},[c]);const x=()=>{h.current&&b(h.current.scrollWidth>h.current.clientWidth)};return a.useEffect(()=>(x(),window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}),[]),a.useEffect(()=>{const n=navigator.userAgent||navigator.vendor;setTimeout(()=>{/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile/.test(n)&&alert("This website is not optimized for mobile devices. Please use a desktop browser.")},100)},[]),s.jsx(L,{children:s.jsxs("div",{className:"flex flex-col items-center w-full justify-between min-h-screen gap-4 relative select-none",children:[s.jsx("div",{className:"flex flex-row gap-4 w-full max-w-lg pt-5 px-2 md:px-0",children:s.jsx("input",{type:"text",className:"w-full p-2 border-0 outline-0 text-black bg-no-repeat",placeholder:"Search...",value:r,onChange:S})}),s.jsx("div",{className:"flex w-full grow bg-black/[.4] justify-center border-y-2 border-black max-h-[75vh] ",ref:m,children:s.jsxs("div",{className:"flex flex-col w-full max-w-2xl pr-2 gap-3 overflow-y-auto py-1",ref:h,children:[f.length===0&&s.jsxs("div",{className:"flex flex-col gap-2 w-full p-2",children:[s.jsxs("h2",{className:"text-white text-2xl",children:["Hi! This is a preview of the mod ",s.jsx("span",{className:"font-minecraftBold text-yellow-500",children:"ServerSearch"})]}),s.jsxs("p",{className:"text-gray-300 mt-2",children:["With this new mod for ",s.jsx("span",{className:"text-green-500",children:"Forge 1.20"}),", you can search for servers without opening a browser. Just type the server name, save, and join!"]}),s.jsx("p",{className:"text-red-500 mt-2 animate-pulse",children:"Note: This website and mod are still in development, so there might be some bugs."}),s.jsxs("p",{className:"text-violet-300 mt-4",children:["Made with <3 by ",s.jsx("a",{href:"https://github.com/gabdevele",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-violet-500",children:"@gabdevele"})]})]}),l&&s.jsx("p",{className:"text-red-500",children:"Error fetching servers."}),c.map((n,d)=>s.jsx(N,{name:n.name,motd:n.motd,maxPlayers:n.maxPlayers,playerCount:n.playerCount,icon:n.icon,isOverflowing:y},d)),s.jsx(P,{isLoading:t})]})}),s.jsx(R,{})]})})};E(document.getElementById("root")).render(s.jsx(C,{}));
